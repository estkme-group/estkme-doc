+++
title = "ARA-M SHA-1"
date =  2023-12-17T21:48:31+08:00
weight = 1
+++

## 授予 APP 访问权限

ARA-M 作为智能卡的一个特殊属性，用于在现代操作系统上控制何种用户应用可以访问智能卡接口。目前已经在支持 OMAPI 的 Android 操作系统上广泛应用。  
智能卡 ARA-M 通过开发者证书的 SHA-1 或者 SHA-256 的值来通知操作系统来自哪个开发者的应用可以访问自身。  

修改 ARA-M SHA-1 是一个需要额外注意操作，这意味着：

1. 你可以自由尝试该功能。
2. 该操作的结果是可逆的，或至少有一种恢复先前状态的方法。
3. 不正确的 ARA-M SHA-1 的值会导致 LPA 应用无法管理卡片，需要确保你可以正常访问 STK 或者具有 PCSC 读卡器

点击该菜单项后，会自动执行如下步骤

1. 弹出输入 SHA-1 值的输入框和提示文字
2. 弹出修改成功提示框
3. 向终端设备发起重启 eSTK.me 本身的指令。

{{% notice style="note" title="注意" %}}
当错误地修改了 ARA-M SHA-1 值，又恰好无法正常访问 STK 菜单，那么你需要构造如下 APDU 命令以通过 PCSC 读卡器来设置 ARA-M SHA-1 的值
{{% /notice %}}

```apdu
80 14 00 00 30 81 03 E3 23 00 8D 29 00 61 38 62 65 33 63 31 30 31 66 38 34 30 63 35 30 32 35 63 38 61 33 64 38 64 61 66 35 35 33 31 64 64 39 31 62 31 31 33 34
```

其中，固定头部为

```apdu
80 14 00 00 30 81 03 E3 23 00 8D 29 00
```

这一部分代表了接下来要发送40个 ASCII 字符，并作为 ARA-M 的 SHA-1 值来处理

```apdu
61 38 62 65 33 63 31 30 31 66 38 34 30 63 35 30 32 35 63 38 61 33 64 38 64 61 66 35 35 33 31 64 64 39 31 62 31 31 33 34
```

这一部分是 SHA-1 字符串的十六进制值，即 `A8BE3C101F840C5025C8A3D8DAF5531DD91B1134` 这个字符串的十六进制表示。
